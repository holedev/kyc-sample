// https://supabase.com/partners/integrations/prisma

// NOTE: 
// I do not use database of Supabase, I use my own database with prisma to save data locally.
// I only use Supabase for authentication. You can use Supabase for database as well. 

generator client {
  provider = "prisma-client"
  output   = "./generated/prisma"
}

datasource db {
  provider = "postgresql"
  schemas  = ["public"]
}

enum Status {
  PENDING
  VERIFIED

  @@schema("public")
}

model Nickname {
  id        Int       @id @default(autoincrement())
  authorId  String    @unique
  content   String    @unique
  createdAt DateTime  @default(now())
  updatedAt DateTime  @updatedAt
  kycIds    InfoKYC[]

  @@schema("public")
}

model InfoKYC {
  id         Int       @id @default(autoincrement())
  code       String    @unique
  fullName   String
  birthday   DateTime
  sex        String
  identity   String    @unique
  phone      String    @unique
  status     Status    @default(PENDING)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  nickname   Nickname? @relation(fields: [nicknameId], references: [id])
  nicknameId Int?

  @@schema("public")
}
